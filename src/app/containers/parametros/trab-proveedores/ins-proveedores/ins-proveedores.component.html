
  <form [formGroup] ="ins"
  (ngSubmit)        = "guardar( ins.controls['prvRut'].value,
                                ins.controls['prvNom'].value,
                                ins.controls['prvNom2'].value,
                                ins.controls['prvGiro'].value,
                                ins.controls['prvDir'].value,
                                ins.controls['prvDirNum'].value,
                                ins.controls['paiId'].value,
                                ins.controls['regId'].value,
                                ins.controls['comId'].value,
                                ins.controls['ciuId'].value,
                                ins.controls['prvMail'].value,
                                ins.controls['prvTel'].value,
                                ins.controls['prvCli'].value,
                                ins.controls['prvPrv'].value)">  
        <div class="col-md-12 card card-outline card-primary">
          <div class="card-header">
            <h5 class="card-title">Ingreso de Proveedor / Cliente</h5>
          </div>
          <!-- /.card-header -->
          <div class="card-body row">                 
                  <div class="col-md-4 form-group">
                    <label for="prvRut">Rut (99999999-0)</label>
                      <div class="input-group input-group-sm">
                        <input type="text" class="form-control" id="prvRut" placeholder="Ingresar rut..." formControlName = 'prvRut'
                        [ngClass]="(ins.controls['prvRut'].hasError('required') ||  valRut ||  ins.controls['prvRut'].hasError('pattern') )
                        ? 'was-validated' : 'is-valid'" 
                        >                                      
                      </div>                  
                      <div *ngIf = "ins.controls['prvRut'].hasError('required')">
                        <span class="text-danger">Campo obligatorio!</span>
                      </div>
                      <div *ngIf = "ins.controls['prvRut'].hasError('pattern')">
                        <span class="text-danger">formato incorrecto!</span>
                      </div>
                      <div *ngIf = "valRut">
                        <span class="text-danger">{{mensaje}}</span>
                      </div>
                  </div>                  
                  <div class="col-md-8">
                    <div class="form-group">
                      <div class="form-check form-switch">
                        <input type="checkbox" class="form-check-input" id="prvCli" formControlName='prvCli' role="switch">
                        <label class="form-check-label" for="prvCli">Es cliente</label>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="form-check form-switch">
                        <input type="checkbox" class="form-check-input" id="prvPrv" formControlName='prvPrv' role="switch">
                        <label class="form-check-label" for="prvPrv">Es Proveedor</label>
                      </div>
                    </div>
                  </div>                 
                  <div class="col-md-6 form-group">
                    <label for="prvNom">Nombre</label>
                    <div class="input-group input-group-sm">
                      <input type="text" class="form-control" id="prvNom" placeholder="Ingresar nombre..." formControlName = 'prvNom'  oninput="this.value = this.value.toUpperCase()"
                      [ngClass]="(ins.controls['prvNom'].hasError('required') )
                      ? 'was-validated' : 'is-valid'" 
                      >
                    </div>
                    <div *ngIf = "ins.controls['prvNom'].hasError('required')">
                      <span class="text-danger">Campo obligatorio!</span>
                    </div>
                  </div> 
                  <div class="col-md-6 form-group">
                    <label for="prvNom2">Nombre Fantasía</label>
                    <div class="input-group input-group-sm">
                     <input type="text" class="form-control" id="empApe" placeholder="Ingresar nombre..." formControlName = 'prvNom2'   oninput="this.value = this.value.toUpperCase()"
                     [ngClass]="(ins.controls['prvNom2'].hasError('required') )
                     ? 'was-validated' : 'is-valid'" 
                     >
                    </div>
                    <div *ngIf = "ins.controls['prvNom2'].hasError('required')">
                      <span class="text-danger">Campo obligatorio!</span>
                    </div>
                  </div>                 
                  <div class="col-md-6 form-group">
                    <label for="prvGiro">Giro Comercial</label>
                    <div class="input-group input-group-sm">
                      <input type="text" class="form-control" id="prvGiro" placeholder="Ingresar giro..." formControlName = 'prvGiro'  oninput="this.value = this.value.toUpperCase()"
                      [ngClass]="(ins.controls['prvGiro'].hasError('required') )
                      ? 'was-validated' : 'is-valid'" 
                      >
                    </div>
                    <div *ngIf = "ins.controls['prvGiro'].hasError('required')">
                      <span class="text-danger">Campo obligatorio!</span>
                    </div>
                  </div>
                  <div class="col-md-6 form-group">
                    <label for="prvDir">Dirección</label>
                    <div class="input-group input-group-sm">
                      <input type="text" class="form-control" id="prvDir" placeholder="Ingresar dirección..." formControlName = 'prvDir' 
                      [ngClass]="(ins.controls['prvDir'].hasError('required') )
                      ? 'was-validated' : 'is-valid'" 
                      >
                    </div>                    
                    <div *ngIf = "ins.controls['prvDir'].hasError('required')">
                      <span class="text-danger">Campo obligatorio!</span>
                    </div>
                  </div>                     
                  <div class="col-md-6 form-group">
                    <label for="prvDir">Número</label>
                    <div class="input-group input-group-sm">
                      <input type="text" class="form-control" id="prvDirNum" placeholder="Ingresar número..." formControlName = 'prvDirNum'
                      [ngClass]="(ins.controls['prvDirNum'].hasError('required') )
                      ? 'was-validated' : 'is-valid'" 
                      >
                    </div>                
                    <div *ngIf = "ins.controls['prvDirNum'].hasError('required')">
                      <span class="text-danger">Campo obligatorio!</span>
                    </div>
                  </div> 
                  <div class="col-md-6 form-group">
                    <label for="nombre">País</label>
                    <div  *ngIf=" !paises.length ">
                      <div class="spinner-border spinner-border-sm" role="status">
                        <span class="sr-only">Loading...</span>
                      </div>
                      <div class="spinner-grow spinner-grow-sm" role="status">
                        <span class="sr-only">Loading...</span>
                      </div>
                    </div>
                    <div class=" input-group-sm" *ngIf="paises.length > 0">
                      <ng-select  [items]="paises"
                        bindLabel="paiDes"
                        bindValue="paiId"
                        formControlName="paiId"
                        [ngClass]="(ins.controls['paiId'].hasError('required'))
                        ? 'was-validated' : 'is-valid'" >
                        </ng-select >
                    </div>
                    <div *ngIf = "ins.controls['paiId'].hasError('required')">
                      <span class="text-danger">Campo obligatorio!</span>
                    </div>
                  </div>
                  <div class="col-md-6 form-group">
                    <label for="nombre">Región</label>
                    <div  *ngIf=" !regiones.length ">
                      <div class="spinner-border spinner-border-sm" role="status">
                        <span class="sr-only">Loading...</span>
                      </div>
                      <div class="spinner-grow spinner-grow-sm" role="status">
                        <span class="sr-only">Loading...</span>
                      </div>
                    </div>
                    <div class=" input-group-sm" *ngIf="regiones.length  > 0 && paises.length > 0">
                      <ng-select  [items]="regiones"
                        bindLabel="regDes"
                        bindValue="regId"
                        formControlName="regId"
                        [ngClass]="(ins.controls['regId'].hasError('required'))
                        ? 'was-validated' : 'is-valid'" >
                        </ng-select >
                    </div>
                    <div *ngIf = "ins.controls['regId'].hasError('required')">
                      <span class="text-danger">Campo obligatorio!</span>
                    </div>
                  </div>           
                  <div class="col-md-6 form-group">
                    <label for="nombre">Ciudad</label>
                    <div  *ngIf=" !ciudades.length ">
                      <div class="spinner-border spinner-border-sm" role="status">
                        <span class="sr-only">Loading...</span>
                      </div>
                      <div class="spinner-grow spinner-grow-sm" role="status">
                        <span class="sr-only">Loading...</span>
                      </div>
                    </div>
                    <div class=" input-group-sm" *ngIf="regiones.length  > 0 && paises.length > 0 && ciudades.length > 0">
                      <ng-select  [items]="ciudades"
                        bindLabel="ciuDes"
                        bindValue="ciuId"
                        formControlName="ciuId"
                        [ngClass]="(ins.controls['ciuId'].hasError('required'))
                        ? 'was-validated' : 'is-valid'" >
                        </ng-select >
                    </div>
                    <div *ngIf = "ins.controls['ciuId'].hasError('required')">
                      <span class="text-danger">Campo obligatorio!</span>
                    </div>
                  </div> 
                  <div class="col-md-6 form-group">
                    <label for="nombre">Comuna</label>
                    <div  *ngIf=" !comunas.length ">
                      <div class="spinner-border spinner-border-sm" role="status">
                        <span class="sr-only">Loading...</span>
                      </div>
                      <div class="spinner-grow spinner-grow-sm" role="status">
                        <span class="sr-only">Loading...</span>
                      </div>
                    </div>
                    <div class=" input-group-sm" *ngIf="regiones.length  > 0 && paises.length > 0 && ciudades.length > 0 && comunas.length > 0">
                      <ng-select  [items]="comunas"
                        bindLabel="comDes"
                        bindValue="comId"
                        formControlName="comId"
                        [ngClass]="(ins.controls['comId'].hasError('required'))
                        ? 'was-validated' : 'is-valid'" >
                        </ng-select >
                    </div>
                    <div *ngIf = "ins.controls['comId'].hasError('required')">
                      <span class="text-danger">Campo obligatorio!</span>
                    </div>
                  </div>
                  <div class="col-md-6 form-group">
                    <label for="prvMail">Correo</label>
                    <div class="input-group input-group-sm">
                      <input type="text" class="form-control" id="prvMail" placeholder="Ingresar correo..." formControlName = 'prvMail'  
                      [ngClass]="( ins.controls['prvMail'].hasError('email') )
                      ? 'was-validated' : ''" 
                      >
                    </div>                
                    <div *ngIf="ins.controls['prvMail'].hasError('email')">
                      <span class="text-danger">Ingrese correo valido!</span>
                    </div>
                  </div>
                  <div class="col-md-6 form-group">
                    <label for="prvTel">Télefono</label>
                    <div class="input-group input-group-sm">
                      <input type="text" class="form-control" id="prvTel" placeholder="Ingresar correo..." formControlName = 'prvTel'
                      [ngClass]="(ins.controls['prvTel'].hasError('required') )
                      ? 'was-validated' : 'is-valid'" 
                      >
                    </div>                
                    <div *ngIf = "ins.controls['prvTel'].hasError('required')">
                      <span class="text-danger">Campo obligatorio!</span>
                    </div>
                  </div>
                  <div class="col-md-12">
                    <button type="submit" class="btn btn-outline-primary btn-sm mb-3 mt-2"  *ngIf ="ins.valid && !valRut" [disabled]="val">
                      <div *ngIf= "val">
                        Guardando..
                        <span class="spinner-border spinner-border-sm mr-2"></span>
                      </div>
                      <div *ngIf= "!val">
                        Guardar
                      </div>
                    </button>
                    <a  routerLink=".." class="btn btn-outline-primary btn-sm mb-3 mt-2">
                      <fa-icon [icon]=" faArrowTurnDown"></fa-icon>             
                      Volver
                    </a>
                  </div>
              </div>
            </div>        
          <!-- /.card-body -->    
  </form>

  
  